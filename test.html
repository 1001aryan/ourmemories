<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Timeline of Our Memories <3 </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Inter:wght@300;400&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'brand-dark': '#0D0D25',
                        'brand-light': '#F0F0F0',
                        'brand-accent': '#FF8C8C',
                        'brand-secondary': '#4ECDC4',
                    },
                    fontFamily: {
                        'serif': ['Playfair Display', 'serif'],
                        'sans': ['Inter', 'sans-serif'],
                    },
                },
            },
        };
    </script>
    
    <style type="text/tailwindcss">
        :root {
            --bg-top: #89f7fe; /* Dawn start */
            --bg-bottom: #66a6ff;
            --sun-glow: #FFD700;
            --vignette-opacity: 0;
        }

        body {
            @apply bg-brand-dark text-brand-light font-sans overflow-x-hidden;
        }

        #vignette {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 50;
            pointer-events: none;
            box-shadow: inset 0 0 20vw 10vw rgba(0,0,0, var(--vignette-opacity));
        }

        #background-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -3;
            background: linear-gradient(180deg, var(--bg-top), var(--bg-bottom));
        }
        
        #stars-container, #shooting-stars-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2; opacity: 0;
        }

        .star {
            position: absolute; background-color: white; border-radius: 50%; animation: twinkle 3s infinite alternate;
        }
        
        .shooting-star {
            position: absolute;
            height: 2px;
            background: linear-gradient(-45deg, #fff, rgba(255, 255, 255, 0));
            border-radius: 999px;
            filter: drop-shadow(0 0 6px #fff);
            animation: tail 3s ease-in-out infinite, shooting 3s ease-in-out infinite;
        }

        #sun, #moon {
            position: fixed; border-radius: 50%; z-index: -1;
        }

        #sun {
            top: 15vh; left: 10vw; width: clamp(60px, 15vmin, 150px); height: clamp(60px, 15vmin, 150px);
            background: radial-gradient(circle, #FFF7B0, #FFD700);
            box-shadow: 0 0 40px var(--sun-glow), 0 0 80px var(--sun-glow);
        }

        #moon {
            top: 100vh; right: 15vw; width: clamp(50px, 12vmin, 120px); height: clamp(50px, 12vmin, 120px);
            background: #f0f0e0;
            box-shadow: 0 0 30px #f0f0e0, 0 0 60px #ffffff, inset -25px -15px 40px #a9a9a9;
            opacity: 0;
        }

        .timeline-item {
            @apply max-w-2xl mx-auto px-6 py-8;
        }

        .memory-card, .question-card {
            @apply bg-white/5 backdrop-blur-xl rounded-xl p-6 md:p-8 shadow-2xl border border-white/10;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.2), 0 8px 40px rgba(0, 0, 0, 0.3);
        }
        
        .memory-card .image-container {
            @apply rounded-lg shadow-lg mb-6 w-full h-auto object-cover border-2 border-white/10 overflow-hidden;
        }

        .memory-card .image-container img {
            @apply w-full h-full object-cover;
            animation: kenburns 20s ease-in-out infinite alternate;
        }

        .question-card { @apply bg-brand-accent/10 border-brand-accent/20; }
        
        .answer-option {
             @apply block w-full bg-white/10 hover:bg-white/20 text-brand-light font-semibold py-3 px-5 my-2 rounded-lg transition-all duration-300 cursor-pointer border border-white/20 focus:outline-none focus:ring-2 focus:ring-brand-accent transform hover:scale-105;
        }
        
        .answer-option.correct { @apply bg-brand-secondary/90 border-brand-secondary text-brand-dark font-bold; animation: pulse-correct 0.8s ease-in-out; }
        .answer-option.incorrect { @apply bg-brand-accent/90 border-brand-accent text-white; }

        .confetti-container { @apply absolute top-0 left-0 w-full h-full pointer-events-none overflow-hidden z-50; }
        .confetti { @apply absolute w-2 h-4 opacity-0; }

        #bond-meter { @apply fixed top-1/2 -translate-y-1/2 right-4 md:right-8 w-2 h-48 bg-white/10 rounded-full z-40 backdrop-blur-sm border border-white/20; }
        #bond-meter-fill { @apply absolute bottom-0 left-0 w-full bg-gradient-to-t from-brand-secondary to-brand-accent rounded-full; transition: height 0.8s ease-in-out; }
        
        .main-header-text {
            background: linear-gradient(135deg, #FFD700, #FF8C8C, #F0F0F0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 20px rgba(255,140,140,0.3);
        }

        @keyframes pulse-correct { 0% { transform: scale(1); } 50% { transform: scale(1.03); } 100% { transform: scale(1); } }
        @keyframes twinkle { from { opacity: 0.2; transform: scale(0.8); } to { opacity: 1; transform: scale(1.2); } }
        @keyframes kenburns { 0% { transform: scale(1.1) translate(2%, -1%); } 100% { transform: scale(1.1) translate(-2%, 1%); } }
        @keyframes fall { from { transform: translateY(-20px) rotate(0deg); opacity: 1; } to { transform: translateY(200px) rotate(var(--rotate-deg)); opacity: 0; } }
        @keyframes tail { 0% { width: 0; } 30% { width: 100px; } 100% { width: 0; } }
        @keyframes shooting { 0% { transform: translateX(0); } 100% { transform: translateX(300px); } }

    </style>
</head>

<body class="antialiased">
    
    <audio id="background-music" loop preload="auto"><source src="assets/audio/ambient-music.mp3" type="audio/mpeg"></audio>
    <audio id="correct-sound" preload="auto"><source src="assets/audio/correct-answer.mp3" type="audio/mpeg"></audio>
    <audio id="finale-sound" preload="auto"><source src="assets/audio/finale-reveal.mp3" type="audio/mpeg"></audio>

    <div id="vignette"></div>
    <div id="background-container"></div>
    <div id="stars-container"></div>
    <div id="shooting-stars-container"></div>
    <div id="sun"></div>
    <div id="moon"></div>
    
    <div id="bond-meter">
        <div id="bond-meter-fill" style="height: 0%;"></div>
    </div>

    <main id="timeline-container" class="relative z-10 pt-20 pb-24">

        <header class="timeline-item text-center">
            <h1 class="text-6xl md:text-8xl font-serif font-black mb-6 main-header-text">Our Timeline</h1>
            <p class="text-base md:text-lg text-brand-light/70 font-light">Scroll down to relive the moments that made us.</p>
        </header>

        <section class="timeline-item text-center">
            <div id="finale" class="min-h-screen flex flex-col items-center justify-center">
                <h2 class="text-3xl md:text-5xl font-serif font-bold mb-6">Our Love Graph</h2>
                <p class="max-w-xl text-brand-light/80 mb-8">
                    Every moment, every laugh, every challenge... they all added up. This is how my love for you has grown—and continues to grow—infinitely.
                </p>
                <div class="w-full h-96 bg-white/5 backdrop-blur-xl rounded-xl p-4 shadow-2xl border border-white/10">
                    <canvas id="loveGraph"></canvas>
                </div>
            </div>
        </section>

    </main>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        
        // ===================================================================
        // ================== 1. CONTENT HERE ================================
        // ===================================================================

        const timelineData = [
            {
                type: 'memory',
                image: 'https://images.unsplash.com/photo-1519681393784-d120267933ba?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80',
                text: 'It all started here. A simple hello, a shared laugh over something silly. Little did we know, this was the first step on the most beautiful journey of our lives.'
            },
            {
                type: 'question',
                question: 'What was the name of the coffee shop where we first met?',
                answers: ['The Daily Grind', 'Starbucks', 'Cafe Connection', 'The Grind House'],
                correctAnswer: 'The Daily Grind'
            },
            {
                type: 'memory',
                image: 'https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80',
                text: 'Our first trip together. The world felt bigger, brighter, and infinitely more exciting with you by my side. Every view was better because I was sharing it with you.'
            },
             {
                type: 'memory',
                image: 'https://images.unsplash.com/photo-1504208434309-cb69f4c64383?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80',
                text: 'Those late-night talks, huddled under a blanket of stars. We shared dreams, fears, and secrets. It was then I knew this was more than just a fleeting feeling.'
            },
            {
                type: 'question',
                question: 'Which constellation did we try (and fail) to find that night?',
                answers: ['Orion', 'The Big Dipper', 'Cassiopeia', 'Scorpius'],
                correctAnswer: 'Orion'
            },
            {
                type: 'memory',
                image: 'https://images.unsplash.com/photo-1600880292210-85938a1e749e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80',
                text: 'Through the tough times, you were my rock. Your unwavering support gave me the strength to face any challenge. We learned that together, we are truly unstoppable.'
            },
            {
                type: 'question',
                question: 'What "good luck" meal did you make for me before my big presentation?',
                answers: ['Spaghetti Carbonara', '"Power-Up" Pancakes', 'Lucky Lentil Soup', 'Victory Pizza'],
                correctAnswer: '"Power-Up" Pancakes'
            },
        ];

        const loveGraphData = {
            labels: ['First Met', 'First Trip', 'Deep Talks', 'Big Support', 'Today & Forever'],
            data: [20, 45, 65, 85, 100]
        };

        // ===================================================================
        // === 2. APPLICATION LOGIC (No need to edit below this line) ========
        // ===================================================================
        
        const music = document.getElementById('background-music');
        const correctSound = document.getElementById('correct-sound');
        const finaleSound = document.getElementById('finale-sound');
        music.volume = 0.05;

        // Play music on first user interaction
        const playMusic = () => {
            music.play().catch(() => {});
            document.body.removeEventListener('click', playMusic);
        };
        document.body.addEventListener('click', playMusic);

        const timelineContainer = document.getElementById('timeline-container');
        const finaleSection = document.getElementById('finale').parentElement; // Get the parent section
        let questions = [];

        function buildTimeline() {
            let contentHtml = '';
            timelineData.forEach((item) => {
                if (item.type === 'memory') {
                    contentHtml += `
                        <section class="timeline-item">
                            <div class="memory-card">
                                <div class="image-container"><img src="${item.image}" alt="Memory Image" loading="lazy"></div>
                                <p class="text-brand-light/80 text-base md:text-lg font-light leading-relaxed">${item.text}</p>
                            </div>
                        </section>`;
                } else if (item.type === 'question') {
                    const answersHtml = item.answers.map(answer => 
                        `<button class="answer-option" data-correct="${answer === item.correctAnswer}">${answer}</button>`
                    ).join('');
                    contentHtml += `
                        <section class="timeline-item">
                            <div class="question-card relative" data-answered="false">
                                <div class="confetti-container"></div>
                                <h3 class="text-xl md:text-2xl font-serif font-bold mb-6">${item.question}</h3>
                                <div class="answers-container">${answersHtml}</div>
                            </div>
                        </section>`;
                    questions.push(item);
                }
            });
            finaleSection.insertAdjacentHTML('beforebegin', contentHtml);
        }
        buildTimeline();

        // --- Star & Particle Generation ---
        function createStars(containerId, starClass, count) {
            const container = document.getElementById(containerId);
            for (let i = 0; i < count; i++) {
                const star = document.createElement('div');
                star.classList.add(starClass);
                const size = Math.random() * 2 + 1;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.left = `${Math.random() * 100}%`;
                const duration = 2 + Math.random() * 3;
                star.style.animation = `twinkle ${duration}s infinite alternate`;
                star.style.animationDelay = `${Math.random() * duration}s`;
                container.appendChild(star);
            }
        }
        function createShootingStars() {
            const container = document.getElementById('shooting-stars-container');
            for(let i = 0; i < 5; i++) {
                const star = document.createElement('div');
                star.classList.add('shooting-star');
                star.style.top = `${Math.random() * 60}%`;
                star.style.left = `-${Math.random() * 100}%`;
                const delay = Math.random() * 10 + 2;
                star.style.animationDelay = `${delay}s`;
                container.appendChild(star);
            }
        }
        createStars('stars-container', 'star', 300);
        createShootingStars();
        
        // --- GSAP Animations ---
        gsap.registerPlugin(ScrollTrigger);

        const fullTimeline = gsap.timeline({
            scrollTrigger: {
                trigger: "body",
                start: "top top",
                end: "bottom bottom",
                scrub: 1.5
            }
        });

        // Background Day-Night Cycle
        fullTimeline
            .to(":root", { "--bg-top": "#66a6ff", "--bg-bottom": "#89f7fe", duration: 1 }) // Dawn -> Day
            .to(":root", { "--bg-top": "#f3904f", "--bg-bottom": "#3b4371", duration: 1 }) // Day -> Sunset
            .to(":root", { "--bg-top": "#0D0D25", "--bg-bottom": "#07224f", duration: 1.5 }); // Sunset -> Night

        // Sun & Moon Path
        gsap.to("#sun", {
            y: () => window.innerHeight * 1.5,
            ease: "power1.in",
            scrollTrigger: { trigger: "body", scrub: 1.5, end: "60% bottom" }
        });
        gsap.fromTo("#moon", { y: "50vh", opacity: 0}, {
            y: "-40vh", opacity: 1, ease: "power1.out",
            scrollTrigger: { trigger: "body", scrub: 1.5, start: "50% top" }
        });
        
        // Stars & Vignette fade in
        gsap.to(["#stars-container", "#shooting-stars-container"], {
            opacity: 1,
            scrollTrigger: { trigger: "body", scrub: 1.5, start: "65% top" }
        });
        gsap.to(":root", {
            "--vignette-opacity": 0.3,
            scrollTrigger: { trigger: "body", scrub: 2, start: "70% top" }
        });

        // Timeline items reveal with parallax
        document.querySelectorAll('.timeline-item').forEach(item => {
            gsap.fromTo(item, 
                { y: 100, opacity: 0 },
                {
                    y: -50, opacity: 1,
                    ease: "power3.out",
                    scrollTrigger: {
                        trigger: item,
                        start: "top 80%",
                        end: "bottom 20%",
                        scrub: 1.2
                    }
                }
            );
        });
        
        // Staggered answer reveal
        document.querySelectorAll('.question-card').forEach(card => {
            gsap.from(card.querySelectorAll('.answer-option'), {
                opacity: 0,
                y: 20,
                stagger: 0.1,
                duration: 0.5,
                ease: "power2.out",
                scrollTrigger: {
                    trigger: card,
                    start: "top 70%",
                    toggleActions: "play none none reverse"
                }
            });
        });

        // --- Interactivity Logic ---
        let correctAnswersCount = 0;
        const totalQuestions = questions.length;
        const bondMeterFill = document.getElementById('bond-meter-fill');
        
        function updateBondMeter() {
             const percentage = (correctAnswersCount / totalQuestions) * 100;
             bondMeterFill.style.height = `${percentage}%`;
        }

        document.querySelectorAll('.answers-container').forEach(container => {
            container.addEventListener('click', (e) => {
                if (e.target.classList.contains('answer-option')) {
                    const button = e.target;
                    const parentCard = button.closest('.question-card');
                    if (parentCard.dataset.answered === 'true') return;
                    
                    parentCard.dataset.answered = 'true';
                    const isCorrect = button.dataset.correct === 'true';
                    
                    parentCard.querySelectorAll('.answer-option').forEach(opt => opt.disabled = true);
                    
                    if (isCorrect) {
                        button.classList.add('correct');
                        correctAnswersCount++;
                        triggerConfetti(parentCard.querySelector('.confetti-container'));
                        correctSound.currentTime = 0;
                        correctSound.play();
                    } else {
                        button.classList.add('incorrect');
                        parentCard.querySelector('[data-correct="true"]').classList.add('correct');
                    }
                    updateBondMeter();
                }
            });
        });

        function triggerConfetti(container) {
            for (let i = 0; i < 100; i++) {
                const c = document.createElement('div');
                c.classList.add('confetti');
                c.style.left = `${Math.random() * 100}%`;
                c.style.backgroundColor = Math.random() > 0.5 ? '#FF8C8C' : '#4ECDC4';
                const duration = 2 + Math.random() * 3;
                const delay = Math.random() * 0.5;
                c.style.animation = `fall ${duration}s ${delay}s linear forwards`;
                c.style.setProperty('--rotate-deg', `${Math.random() * 720}deg`);
                container.appendChild(c);
                setTimeout(() => c.remove(), (duration + delay) * 1000 + 100);
            }
        }
        const styleSheet = document.createElement("style");
        styleSheet.innerText = `@keyframes fall { from { transform: translateY(-20px) rotate(0deg); opacity: 1; } to { transform: translateY(200px) rotate(var(--rotate-deg)); opacity: 0; } }`;
        document.head.appendChild(styleSheet);


        // --- Love Graph ---
        const ctx = document.getElementById('loveGraph').getContext('2d');
        const gradient = ctx.createLinearGradient(0, 0, 0, 400);
        gradient.addColorStop(0, 'rgba(255, 140, 140, 0.5)');
        gradient.addColorStop(1, 'rgba(255, 140, 140, 0)');
        
        const loveChartConfig = {
            type: 'line',
            data: {
                labels: loveGraphData.labels,
                datasets: [{
                    label: 'Our Love Growth',
                    data: [], // Initially empty
                    borderColor: 'rgba(255, 140, 140, 0.9)',
                    backgroundColor: gradient,
                    fill: true,
                    tension: 0.4,
                    pointBackgroundColor: '#F0F0F0',
                    pointBorderColor: '#FF8C8C',
                    pointRadius: 6,
                    pointHoverRadius: 10,
                    pointHoverBorderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: { beginAtZero: true, max: 105, grid: { color: 'rgba(255,255,255,0.1)' }, ticks: { color: '#F0F0F0', font: { family: "'Playfair Display', serif" } } },
                    x: { grid: { color: 'rgba(255,255,255,0.1)' }, ticks: { color: '#F0F0F0', font: { family: "'Inter', sans-serif" } } }
                },
                plugins: { 
                    legend: { display: false },
                    tooltip: {
                        enabled: true, backgroundColor: '#0D0D25', titleFont: { family: "'Playfair Display', serif", size: 16 }, bodyFont: { family: "'Inter', sans-serif" }, padding: 12, cornerRadius: 6 
                    }
                }
            }
        };
        
        let loveChart = new Chart(ctx, loveChartConfig);
        
        // Animate graph drawing on scroll
        ScrollTrigger.create({
            trigger: "#finale",
            start: "top 60%",
            onEnter: () => {
                finaleSound.currentTime = 0;
                finaleSound.play();
                // Animate the data loading
                gsap.to(loveChart.data.datasets[0].data, {
                    endArray: loveGraphData.data,
                    duration: 2.5,
                    ease: "power3.inOut",
                    onUpdate: function() {
                        loveChart.data.datasets[0].data = this.targets()[0];
                        loveChart.update();
                    }
                });
            },
            onLeaveBack: () => {
                loveChart.data.datasets[0].data = [];
                loveChart.update();
            },
            once: false // Set to true if you want it to animate only once
        });

    });
    </script>
</body>
</html>
