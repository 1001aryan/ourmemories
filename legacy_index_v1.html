<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Timeline of Our Memories <3</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair:ital,opsz,wght@0,5..1200,300..900;1,5..1200,300..900&display=swap"
      rel="stylesheet"
    />

    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              "brand-dark": "#0D0D25",
              "brand-light": "#F0F0F0",
              "brand-accent": "#FF8C8C",
              "brand-secondary": "#4ECDC4",
              "brand-sunset": "#ff7e5f",
              "brand-day": "#89f7fe",
            },
            fontFamily: {
              serif: ["Playfair", "serif"],
              sans: ["Playfair", "serif"],
            },
          },
        },
      };
    </script>

    <style type="text/tailwindcss">
      :root {
        --bg-top: #0d0d25;
        --bg-bottom: #0e97ec;
      }

      body {
        @apply bg-brand-dark text-brand-light font-sans overflow-x-hidden;
      }

      #background-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -2;
        background: linear-gradient(180deg, var(--bg-top), var(--bg-bottom));
      }

      #stars-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        opacity: 0;
      }

      .star {
        position: absolute;
        background-color: white;
        border-radius: 50%;
        animation: twinkle 1s infinite alternate;
      }

      #sun,
      #moon {
        position: fixed;
        border-radius: 50%;
        z-index: -1;
      }

      #sun {
        top: 10vh;
        left: 10vw;
        width: clamp(60px, 15vmin, 150px);
        height: clamp(60px, 15vmin, 150px);
        background: radial-gradient(circle, #fff7b0, #ffd700);
        box-shadow: 0 0 40px #ffd700, 0 0 80px #fff7b0;
      }

      #moon {
        bottom: 15vh;
        right: 15vw;
        width: clamp(50px, 12vmin, 120px);
        height: clamp(50px, 12vmin, 120px);
        background: #f0f0e0;
        box-shadow: 0 0 30px #f0f0e0, 0 0 60px #ffffff,
          inset -25px -15px 40px #a9a9a9;
        opacity: 0;
      }

      .timeline-item {
        @apply max-w-2xl mx-auto px-6 py-5;
      }

      .memory-card,
      .question-card {
        @apply bg-white/5 backdrop-blur-xl rounded-xl p-6 md:p-8 shadow-2xl border border-white/10;
        /* Enhanced glow effect */
        box-shadow: 0 0 15px rgba(255, 255, 255, 0.05),
          0 4px 30px rgba(0, 0, 0, 0.2);
      }

      .memory-card img {
        @apply rounded-lg shadow-lg mb-6 w-full h-auto object-cover border-2 border-white/10;
      }

      .question-card {
        @apply bg-brand-accent/10 border-brand-accent/20;
      }

      .answer-option {
        @apply block w-full bg-white/10 hover:bg-white/20 text-brand-light font-semibold py-2 px-4 my-2 rounded-lg transition-all duration-300 cursor-pointer border border-white/20 focus:outline-none focus:ring-2 focus:ring-brand-accent;
      }

      .answer-option.correct {
        @apply bg-brand-secondary/90 border-brand-secondary text-brand-dark font-bold;
        animation: pulse-correct 0.8s ease-in-out;
      }

      .answer-option.incorrect {
        @apply bg-brand-accent/90 border-brand-accent text-white;
      }

      .confetti-container {
        @apply absolute top-0 left-0 w-full h-full pointer-events-none overflow-hidden z-50;
      }
      .confetti {
        @apply absolute w-2 h-4 opacity-0;
      }

      @keyframes pulse-correct {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.03);
        }
        100% {
          transform: scale(1);
        }
      }
      @keyframes twinkle {
        from {
          opacity: 0.2;
          transform: scale(0.8);
        }
        to {
          opacity: 1;
          transform: scale(1.2);
        }
      }
    </style>
  </head>

  <body class="antialiased">
    <audio id="background-music" loop preload="auto">
      <source src="assets/audio/audio.mp3" type="audio/mpeg" />
    </audio>

    <div id="background-container"></div>
    <div id="stars-container"></div>
    <div id="sun"></div>
    <div id="moon"></div>

    <main id="timeline-container" class="relative z-10 pt-20 pb-24">
      <header class="timeline-item text-center">
        <h1
          class="text-6xl md:text-6xl font-serif font-black text-brand-light mb-6"
          style="text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3)"
        >
          OUR MEMORIES
        </h1>
        <p class="text-base md:text-base text-brand-light/50 font-black">
          Scroll down to relive the moments that made us.
        </p>
      </header>

      <section class="timeline-item text-center">
        <div
          id="finale"
          class="min-h-screen flex flex-col items-center justify-center"
        >
          <h2 class="text-7xl md:text-7xl font-serif font-black mb-6 mt-8">
            Our Love Graph
          </h2>
          <p class="text-xl max-w-xl md:text-xl text-brand-light/50 mb-8">
            Every moment, every laugh, every challenge... they all added up.
            This is how my love for you has grown—and continues to grow—over
            time.
          </p>
          <div
            class="w-full h-96 bg-white/5 backdrop-blur-xl rounded-xl p-4 shadow-2xl border border-white/10"
          >
            <canvas id="loveGraph" class="w-full h-full"></canvas>
          </div>
        </div>
      </section>
    </main>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // ===================================================================
        // ================== 1. CONTENT HERE ================================
        // ===================================================================

        const timelineData = [
          {
            type: "memory",
            // To change image, just change the seed number (e.g., /seed/123/)
            image: "",
            text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean et luctus est. Suspendisse ut sapien augue. Nunc feugiat ultrices justo eu sollicitudin. Pellentesque vulputate ligula lacus, sed euismod urna sollicitudin vel. Ut ante magna, dapibus interdum dignissim a, lacinia quis lorem. Aliquam tortor sem, tincidunt et facilisis eget, tempor ac tortor. Pellentesque in dolor bibendum, congue orci eget, efficitur felis. Suspendisse rutrum dapibus eros, iaculis imperdiet massa pellentesque consequat. Nullam ullamcorper id purus in eleifend. Donec fringilla ullamcorper ligula sed interdum.",
          },
          {
            type: "question",
            question: "What is 1+1?",
            answers: [
              "Lorem Ipsum 1",
              "Lorem Ipsum 2",
              "Lorem Ipsum 3",
              "Lorem Ipsum 4",
            ],
            correctAnswer: "Lorem Ipsum 1",
          },
          {
            type: "memory",
            image: "",
            text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean et luctus est. Suspendisse ut sapien augue. Nunc feugiat ultrices justo eu sollicitudin. Pellentesque vulputate ligula lacus, sed euismod urna sollicitudin vel. Ut ante magna, dapibus interdum dignissim a, lacinia quis lorem. Aliquam tortor sem, tincidunt et facilisis eget, tempor ac tortor. Pellentesque in dolor bibendum, congue orci eget, efficitur felis. Suspendisse rutrum dapibus eros, iaculis imperdiet massa pellentesque consequat. Nullam ullamcorper id purus in eleifend. Donec fringilla ullamcorper ligula sed interdum.",
          },
          {
            type: "question",
            question: "What is 1+1?",
            answers: [
              "Lorem Ipsum 1",
              "Lorem Ipsum 2",
              "Lorem Ipsum 3",
              "Lorem Ipsum 4",
            ],
            correctAnswer: "Lorem Ipsum 1",
          },
          {
            type: "memory",
            image: "",
            text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean et luctus est. Suspendisse ut sapien augue. Nunc feugiat ultrices justo eu sollicitudin. Pellentesque vulputate ligula lacus, sed euismod urna sollicitudin vel. Ut ante magna, dapibus interdum dignissim a, lacinia quis lorem. Aliquam tortor sem, tincidunt et facilisis eget, tempor ac tortor. Pellentesque in dolor bibendum, congue orci eget, efficitur felis. Suspendisse rutrum dapibus eros, iaculis imperdiet massa pellentesque consequat. Nullam ullamcorper id purus in eleifend. Donec fringilla ullamcorper ligula sed interdum.",
          },
          {
            type: "question",
            question: "What is 1+1?",
            answers: [
              "Lorem Ipsum 1",
              "Lorem Ipsum 2",
              "Lorem Ipsum 3",
              "Lorem Ipsum 4",
            ],
            correctAnswer: "Lorem Ipsum 1",
          },
          {
            type: "memory",
            image: "",
            text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean et luctus est. Suspendisse ut sapien augue. Nunc feugiat ultrices justo eu sollicitudin. Pellentesque vulputate ligula lacus, sed euismod urna sollicitudin vel. Ut ante magna, dapibus interdum dignissim a, lacinia quis lorem. Aliquam tortor sem, tincidunt et facilisis eget, tempor ac tortor. Pellentesque in dolor bibendum, congue orci eget, efficitur felis. Suspendisse rutrum dapibus eros, iaculis imperdiet massa pellentesque consequat. Nullam ullamcorper id purus in eleifend. Donec fringilla ullamcorper ligula sed interdum.",
          },
          {
            type: "question",
            question: "What is 1+1?",
            answers: [
              "Lorem Ipsum 1",
              "Lorem Ipsum 2",
              "Lorem Ipsum 3",
              "Lorem Ipsum 4",
            ],
            correctAnswer: "Lorem Ipsum 1",
          },
          {
            type: "memory",
            image: "",
            text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean et luctus est. Suspendisse ut sapien augue. Nunc feugiat ultrices justo eu sollicitudin. Pellentesque vulputate ligula lacus, sed euismod urna sollicitudin vel. Ut ante magna, dapibus interdum dignissim a, lacinia quis lorem. Aliquam tortor sem, tincidunt et facilisis eget, tempor ac tortor. Pellentesque in dolor bibendum, congue orci eget, efficitur felis. Suspendisse rutrum dapibus eros, iaculis imperdiet massa pellentesque consequat. Nullam ullamcorper id purus in eleifend. Donec fringilla ullamcorper ligula sed interdum.",
          },
          {
            type: "question",
            question: "What is 1+1?",
            answers: [
              "Lorem Ipsum 1",
              "Lorem Ipsum 2",
              "Lorem Ipsum 3",
              "Lorem Ipsum 4",
            ],
            correctAnswer: "Lorem Ipsum 1",
          },
          {
            type: "memory",
            image: "",
            text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean et luctus est. Suspendisse ut sapien augue. Nunc feugiat ultrices justo eu sollicitudin. Pellentesque vulputate ligula lacus, sed euismod urna sollicitudin vel. Ut ante magna, dapibus interdum dignissim a, lacinia quis lorem. Aliquam tortor sem, tincidunt et facilisis eget, tempor ac tortor. Pellentesque in dolor bibendum, congue orci eget, efficitur felis. Suspendisse rutrum dapibus eros, iaculis imperdiet massa pellentesque consequat. Nullam ullamcorper id purus in eleifend. Donec fringilla ullamcorper ligula sed interdum.",
          },
          {
            type: "question",
            question: "What is 1+1?",
            answers: [
              "Lorem Ipsum 1",
              "Lorem Ipsum 2",
              "Lorem Ipsum 3",
              "Lorem Ipsum 4",
            ],
            correctAnswer: "Lorem Ipsum 1",
          },
          {
            type: "memory",
            image: "",
            text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean et luctus est. Suspendisse ut sapien augue. Nunc feugiat ultrices justo eu sollicitudin. Pellentesque vulputate ligula lacus, sed euismod urna sollicitudin vel. Ut ante magna, dapibus interdum dignissim a, lacinia quis lorem. Aliquam tortor sem, tincidunt et facilisis eget, tempor ac tortor. Pellentesque in dolor bibendum, congue orci eget, efficitur felis. Suspendisse rutrum dapibus eros, iaculis imperdiet massa pellentesque consequat. Nullam ullamcorper id purus in eleifend. Donec fringilla ullamcorper ligula sed interdum.",
          },
          {
            type: "question",
            question: "What is 1+1?",
            answers: [
              "Lorem Ipsum 1",
              "Lorem Ipsum 2",
              "Lorem Ipsum 3",
              "Lorem Ipsum 4",
            ],
            correctAnswer: "Lorem Ipsum 1",
          },
          {
            type: "memory",
            image: "",
            text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean et luctus est. Suspendisse ut sapien augue. Nunc feugiat ultrices justo eu sollicitudin. Pellentesque vulputate ligula lacus, sed euismod urna sollicitudin vel. Ut ante magna, dapibus interdum dignissim a, lacinia quis lorem. Aliquam tortor sem, tincidunt et facilisis eget, tempor ac tortor. Pellentesque in dolor bibendum, congue orci eget, efficitur felis. Suspendisse rutrum dapibus eros, iaculis imperdiet massa pellentesque consequat. Nullam ullamcorper id purus in eleifend. Donec fringilla ullamcorper ligula sed interdum.",
          },
          {
            type: "question",
            question: "What is 1+1?",
            answers: [
              "Lorem Ipsum 1",
              "Lorem Ipsum 2",
              "Lorem Ipsum 3",
              "Lorem Ipsum 4",
            ],
            correctAnswer: "Lorem Ipsum 1",
          },
        ];

        const loveGraphData = {
          labels: [
            "First Met",
            "First Trip",
            "Deep Talks",
            "Big Support",
            "Today",
          ],
          data: [20, 45, 60, 85, 100],
        };

        // ===================================================================
        // === 2. APPLICATION LOGIC (No need to edit below this line) ========
        // ===================================================================

        const music = document.getElementById("background-music");
        music.volume = 0;
        music.play().catch(() => {
          document.addEventListener("scroll", () => music.play());
        });

        gsap.to(music, {
          volume: 0.1,
          scrollTrigger: {
            trigger: "#finale",
            start: "top 80%",
            end: "top 20%",
            scrub: 1,
          },
        });

        const timelineContainer = document.getElementById("timeline-container");
        const finaleSection = document.getElementById("finale");
        let questions = [];

        function buildTimeline() {
          let contentHtml = "";
          timelineData.forEach((item, index) => {
            if (item.type === "memory") {
              contentHtml += `
                        <section class="timeline-item">
                            <div class="memory-card">
                                <img src="${item.image}" alt="Memory Image" loading="lazy">
                                <p class="text-brand-light/80 md:text-lg">${item.text}</p>
                            </div>
                        </section>`;
            } else if (item.type === "question") {
              const answersHtml = item.answers
                .map(
                  (answer) =>
                    `<button class="answer-option" data-correct="${
                      answer === item.correctAnswer
                    }">${answer}</button>`
                )
                .join("");
              contentHtml += `
                        <section class="timeline-item">
                            <div class="question-card relative" data-answered="false">
                                <div class="confetti-container"></div>
                                <h3 class="text-xl md:text-2xl font-serif font-bold mb-4">${item.question}</h3>
                                <div class="answers-container">${answersHtml}</div>
                            </div>
                        </section>`;
              questions.push(item);
            }
          });
          finaleSection.parentElement.insertAdjacentHTML(
            "beforebegin",
            contentHtml
          );
        }
        buildTimeline();

        // --- Star Generation ---
        function createStars() {
          const container = document.getElementById("stars-container");
          const starCount = 50;
          for (let i = 0; i < starCount; i++) {
            const star = document.createElement("div");
            star.classList.add("star");
            const size = Math.random() * 2 + 1;
            star.style.width = `${size}px`;
            star.style.height = `${size}px`;
            star.style.top = `${Math.random() * 100}%`;
            star.style.left = `${Math.random() * 100}%`;
            const duration = 3 + Math.random() * 2;
            star.style.animation = `twinkle ${
              duration * 0.1
            }s infinite alternate`;
            star.style.animationDelay = `${Math.random() * duration}s`;
            container.appendChild(star);
          }
        }
        createStars();

        // --- GSAP Animations ---
        gsap.registerPlugin(ScrollTrigger);

        const tl = gsap.timeline({
          scrollTrigger: {
            trigger: "body",
            start: "top top",
            end: "bottom bottom",
            scrub: 1.5,
          },
        });

        tl.to(":root", { "--bg-top": "#0E97EC", "--bg-bottom": "#0E97EC" }, ">") // 7AM - 10AM
          .to(":root", { "--bg-top": "#0E97EC", "--bg-bottom": "#3B92C4" }, ">") // 10AM - 12PM
          .to(":root", { "--bg-top": "#3B92C4", "--bg-bottom": "#3B92C4" }, ">") // 12PM - 2PPM
          .to(":root", { "--bg-top": "#3B92C4", "--bg-bottom": "#3B92C4" }, ">") // 2PM - 4PM
          .to(":root", { "--bg-top": "#3B92C4", "--bg-bottom": "#F79640" }, ">") // 4PM - 5PM
          .to(":root", { "--bg-top": "#F79640", "--bg-bottom": "#BD4A1C" }, ">") // 5PM - 6PM
          .to(":root", { "--bg-top": "#BD4A1C", "--bg-bottom": "#4A1120" }, ">") // 6PM - 7PM
          .to(":root", { "--bg-top": "#4A1120", "--bg-bottom": "#210430" }, ">") // 7PM - 8PM
          .to(":root", { "--bg-top": "#210430", "--bg-bottom": "#0d021C" }, ">") // 8PM - 9PM
          .to(":root", { "--bg-top": "#0d021C", "--bg-bottom": "#0D0D25" }, ">") // 9PM - 10PM
          .to(":root", { "--bg-top": "#0D0D25", "--bg-bottom": "#0D0D15" }, ">") // 10PM - 11PM
          .to(
            ":root",
            { "--bg-top": "#0D0D15", "--bg-bottom": "#000000" },
            ">"
          ); // 11PM - 12AM

        gsap.to("#sun", {
          scrollTrigger: {
            trigger: "body",
            scrub: 1.5,
            end: "70% top",
            invalidateOnRefresh: true,
            anticipatePin: 1,
          },
          y: () => window.innerHeight,
          ease: "power1.inOut",
        });

        gsap.to("#moon", {
          scrollTrigger: { trigger: "body", scrub: 1.5, start: "70% top" },
          y: "-40vh",
          opacity: 1,
          ease: "power1.out",
        });

        gsap.to("#stars-container", {
          scrollTrigger: { trigger: "body", scrub: 1.5, start: "80% top" },
          opacity: 1,
        });

        // --- Polished Reveal Animation for timeline items ---
        document.querySelectorAll(".timeline-item").forEach((child) => {
          gsap.from(child, {
            opacity: 0,
            y: 60,
            rotationZ: -10,
            duration: 0.3,
            ease: "power3.out",
            scrollTrigger: {
              trigger: child,
              start: "top 60%",
              toggleActions: "play none none none",
            },
          });
        });

        let correctAnswersCount = 0;
        const totalQuestions = questions.length;

        document.querySelectorAll(".answers-container").forEach((container) => {
          container.addEventListener("click", (e) => {
            if (
              e.target.classList.contains("answer-option") &&
              !e.target.disabled
            ) {
              const button = e.target;
              const parentCard = button.closest(".question-card");
              if (parentCard.dataset.answered === "true") return;
              parentCard.dataset.answered = "true";
              const isCorrect = button.dataset.correct === "true";
              const correctAnswer = parentCard.querySelector(
                '[data-correct="true"]'
              ).textContent;
              parentCard
                .querySelectorAll(".answer-option")
                .forEach((opt) => (opt.disabled = true));

              if (isCorrect) {
                button.classList.add("correct");
                correctAnswersCount++;
                triggerConfetti(
                  parentCard.querySelector(".confetti-container")
                );
              } else {
                button.classList.add("incorrect");
                parentCard
                  .querySelector('[data-correct="true"]')
                  .classList.add("correct");
              }
            }
          });
        });

        function triggerConfetti(container) {
          for (let i = 0; i < 10; i++) {
            const c = document.createElement("div");
            c.classList.add("confetti");
            c.style.left = `${Math.random() * 100}%`;
            c.style.backgroundColor =
              Math.random() > 0.5 ? "#FF8C8C" : "#4ECDC4";
            const duration = 2 + Math.random() * 3;
            const delay = Math.random() * 2;
            c.style.animation = `fall ${duration}s ${delay}s linear forwards`;
            c.style.setProperty("--rotate-deg", `${Math.random() * 720}deg`);
            container.appendChild(c);
            setTimeout(() => c.remove(), (duration + delay) * 1000 + 100);
          }
        }

        const styleSheet = document.createElement("style");
        styleSheet.innerText = `@keyframes fall { from { transform: translateY(-20px) rotate(0deg); opacity: 1; } to { transform: translateY(200px) rotate(var(--rotate-deg)); opacity: 0; } }`;
        document.head.appendChild(styleSheet);

        // --- Love Graph ---
        const ctx = document.getElementById("loveGraph").getContext("2d");
        let loveChart = new Chart(ctx, {
          type: "line",
          data: {
            labels: loveGraphData.labels,
            datasets: [
              {
                label: "Our Love Growth",
                data: loveGraphData.data,
                borderColor: "rgba(255, 140, 140, 0.9)",
                backgroundColor: "rgba(255, 140, 140, 0.2)",
                fill: true,
                tension: 0.4,
                pointBackgroundColor: "#F0F0F0",
                pointBorderColor: "#FF8C8C",
                pointRadius: 6,
                pointHoverRadius: 9,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            animation: { duration: 2000, easing: "easeInOutQuart" },
            scales: {
              y: {
                beginAtZero: true,
                max: 105,
                grid: { color: "rgba(255,255,255,0.1)" },
                ticks: {
                  color: "#F0F0F0",
                  font: { family: "'Playfair', serif" },
                },
              },
              x: {
                grid: { color: "rgba(255,255,255,0.1)" },
                ticks: {
                  color: "#F0F0F0",
                  font: { family: "'Playfair', serif" },
                },
              },
            },
            plugins: {
              legend: { display: false },
              tooltip: {
                enabled: true,
                backgroundColor: "#0D0D25",
                titleFont: { family: "'Playfair', serif", size: 16 },
                bodyFont: { family: "'Playfair', serif" },
                padding: 12,
                cornerRadius: 6,
              },
            },
          },
        });

        // hide graph initially, fade in with GSAP
        gsap.from("#finale", {
          opacity: 0,
          duration: 1,
          scrollTrigger: { trigger: "#finale", start: "top 10%" },
        });
      });
    </script>
  </body>
</html>
